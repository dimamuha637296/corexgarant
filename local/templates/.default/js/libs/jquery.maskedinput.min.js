"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?e(require("jquery")):e(jQuery)}(function(A){var a,e=navigator.userAgent,R=/iphone/i.test(e),i=/chrome/i.test(e),T=/android/i.test(e);A.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},A.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden")&&this.get(0)===document.activeElement)return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((n=this.createTextRange()).collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,b){var n,v,y,k,S,x,j;if(!t&&0<this.length){var e=A(this[0]).data(A.mask.dataName);return e?e():void 0}return b=A.extend({autoclear:A.mask.autoclear,placeholder:A.mask.placeholder,completed:null},b),n=A.mask.definitions,v=[],y=x=t.length,k=null,t=String(t),A.each(t.split(""),function(e,t){"?"==t?(x--,y=e):n[t]?(v.push(new RegExp(n[t])),null===k&&(k=v.length-1),e<y&&(S=v.length-1)):v.push(null)}),this.trigger("unmask").each(function(){var o=A(this),c=A.map(t.split(""),function(e,t){if("?"!=e)return n[e]?f(t):e}),l=c.join(""),r=o.val();function u(){if(b.completed){for(var e=k;e<=S;e++)if(v[e]&&c[e]===f(e))return;b.completed.call(o)}}function f(e){return e<b.placeholder.length?b.placeholder.charAt(e):b.placeholder.charAt(0)}function s(e){for(;++e<x&&!v[e];);return e}function h(e,t){var n,a;if(!(e<0)){for(n=e,a=s(t);n<x;n++)if(v[n]){if(!(a<x&&v[n].test(c[a])))break;c[n]=c[a],c[a]=f(a),a=s(a)}d(),o.caret(Math.max(k,e))}}function m(e){p(),o.val()!=r&&o.change()}function g(e,t){var n;for(n=e;n<t&&n<x;n++)v[n]&&(c[n]=f(n))}function d(){o.val(c.join(""))}function p(e){var t,n,a,i=o.val(),r=-1;for(a=t=0;t<x;t++)if(v[t]){for(c[t]=f(t);a++<i.length;)if(n=i.charAt(a-1),v[t].test(n)){c[t]=n,r=t;break}if(a>i.length){g(t+1,x);break}}else c[t]===i.charAt(a)&&a++,t<y&&(r=t);return e?d():r+1<y?b.autoclear||c.join("")===l?(o.val()&&o.val(""),g(0,x)):d():(d(),o.val(o.val().substring(0,r+1))),y?t:k}o.data(A.mask.dataName,function(){return A.map(c,function(e,t){return v[t]&&e!=f(t)?e:null}).join("")}),o.one("unmask",function(){o.off(".mask").removeData(A.mask.dataName)}).on("focus.mask",function(){var e;o.prop("readonly")||(clearTimeout(a),r=o.val(),e=p(),a=setTimeout(function(){o.get(0)===document.activeElement&&(d(),e==t.replace("?","").length?o.caret(0,e):o.caret(e))},10))}).on("blur.mask",m).on("keydown.mask",function(e){if(!o.prop("readonly")){var t,n,a,i=e.which||e.keyCode;j=o.val(),8===i||46===i||R&&127===i?(n=(t=o.caret()).begin,(a=t.end)-n==0&&(n=46!==i?function(e){for(;0<=--e&&!v[e];);return e}(n):a=s(n-1),a=46===i?s(a):a),g(n,a),h(n,a-1),e.preventDefault()):13===i?m.call(this,e):27===i&&(o.val(r),o.caret(0,p()),e.preventDefault())}}).on("keypress.mask",function(e){if(!o.prop("readonly")){var t,n,a,i=e.which||e.keyCode,r=o.caret();e.ctrlKey||e.altKey||e.metaKey||i<32||!i||13===i||(r.end-r.begin!=0&&(g(r.begin,r.end),h(r.begin,r.end-1)),(t=s(r.begin-1))<x&&(n=String.fromCharCode(i),v[t].test(n))&&(function(e){var t,n,a,i;for(n=f(t=e);t<x;t++)if(v[t]){if(a=s(t),i=c[t],c[t]=n,!(a<x&&v[a].test(i)))break;n=i}}(t),c[t]=n,d(),a=s(t),T?setTimeout(function(){A.proxy(A.fn.caret,o,a)()},0):o.caret(a),r.begin<=S&&u()),e.preventDefault())}}).on("input.mask paste.mask",function(){o.prop("readonly")||setTimeout(function(){var e=p(!0);o.caret(e),u()},0)}),i&&T&&o.off("input.mask").on("input.mask",function(e){var t=o.val(),n=o.caret();if(j&&j.length&&j.length>t.length){for(p(!0);0<n.begin&&!v[n.begin-1];)n.begin--;if(0===n.begin)for(;n.begin<k&&!v[n.begin];)n.begin++;o.caret(n.begin,n.begin)}else{p(!0);var a=t.charAt(n.begin);n.begin<x&&(v[n.begin]||n.begin++,v[n.begin].test(a)&&n.begin++),o.caret(n.begin,n.begin)}u()}),p()})}})});